<% expands('layouts/admin_main');

var groupName,
    active = 'active',
    group,
    item,
    i;

start('chimera-page-title'); -%>
<div class="adminActionHead">
	<span class="title" id="mainTitle"><%= modelName %>: <%= editTitle %></span>
	<div class="actions paginate-actions">
		<% chimera.actions(showActions) %>
	</div>
	<div class="clear"></div>
</div>
<% end('chimera-page-title');

start(store('chimera-view-setting').contentblock) %>

<div class="error"><% errors() %></div>

<div class="editform">
	<div class="grouptabs">
		<ul class="nav nav-tabs">
		<% for (groupName in __groups) { %>
			<li class="<%= active %>"><a href="#chitab-<%= groupName %>" data-toggle="tab"><%= __groups[groupName].title %></a></li>
		<%
			active = '';
		}
		%>
		</ul>
	</div>
	<div class="panel panel-default">
		<div class="panel-body">
			<div class="tab-content">
			<% form.create(modelName, {action: 'here', 'class': 'form-horizontal'}) %>
	<%
		active = 'active';
		for (groupName in __groups) {
	%>
				<div class="tab-pane <%= active %>" id="chitab-<%= groupName %>">
	<%
			active = '';
			group = __groups[groupName];

			for (i = 0; i < group.fields.length; i++) {

				item = group.fields[i];

				print_element('chimera_fields/' + item.view + '_field', {
					variables: {
						item: item
					}
				});
			}

			echo('</div>');
		}
	%>
			</form>
			</div>
		</div>
		<div class="panel-footer">
			<% if (typeof showSaveButton == 'undefined' || showSaveButton) { %>
				<button class="btn btn-primary" id="saveEdit"><%= saveButton %></button>
			<% } %>
		</div>

	</div>
</div>

<% end(store('chimera-view-setting').contentblock) %>