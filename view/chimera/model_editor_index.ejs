<%
expands('layouts/admin_main');

var field, item, i, j;

if (typeof editconnection === 'undefined') {
	var editconnection = '/admin/editor/:modelname/edit/:id';
}

start('chimera-page-title');
implement('chimera/index_head');
end('chimera-page-title');

start(store('chimera-view-setting').contentblock) -%>
<div class="pcard">
	<header class="no-border">
		<div class="row">
			<div class="col-md-4">
				
			</div>
			<div class="col-md-4 center">
				
			</div>
			<div class="col-md-4 right" style="text-align:right;">
				<%= __('chimera', 'Showing') %> <%= items.length %> <%= __('chimera', 'of') %> <%= _PageInfo[modelName].items %> <%= modelName.pluralize() %>
			</div>
		</div>
	</header>
	<div class="body no-border tablewrap table-responsive">
		<table class="table table-hover indextable responsive-table" style="margin-bottom:0px;">
			<thead>
				<tr>
					<th>Actions</th>
					<% for (i = 0; i < fieldInfo.length; i++) {
						field = fieldInfo[i];
					%>
					<th><% Paginate.sort({field: field.fieldPath, display: field.title, parentClass: 'activesort'}) %></th>
					<% } %>
				</tr>
				<tr>
					<th>
						<a data-apply-pagination class="btn btn-default"><% echo(__('filter', 'Apply')) %></button>
					</th>
					<% for (i = 0; i < fieldInfo.length; i++) {
						field = fieldInfo[i];
					%>
					<th><% Paginate.filter({field: field.fieldPath, display: field.title}) %></th>
					<% } %>
				</tr>
			</thead>

			<% for (i = 0; i < items.length; i++) {
				item = items[i];
			%>
				<% if (!item) continue %>
				<tr>
					<td data-title="Actions">
						<div class="actions record-actions">
						<%
							chimera.actions('record', {
								'class': 'btn btn-xs',
								routeVars: {
									id: item._id
								},
								content: false
							});
						%>
						</div>
					</td>
					<% for (j = 0; j < fieldInfo.length; j++) { 
						field = fieldInfo[j];
					%>
						<td data-title="<%= field.title %>"><% chimera.field(item.fields, fieldInfo[j]) %></td>
					<% } %>
				</tr>
			<% } %>
		</table>
		<div class="row">
			<div class="col-md-12">
				<div class="pagination">
					<% Paginate.show() %>
				</div>
				<div class="listinfo">
					<%= __('chimera', 'Showing') %> <%= items.length %> <%= __('chimera', 'of') %> <%= _PageInfo[modelName].items %> entries
				</div>
			</div>
		</div>
	</div>
</div>

<% end(store('chimera-view-setting').contentblock) %>